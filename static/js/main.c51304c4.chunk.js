(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{100:function(e,t,a){e.exports={errorMessage:"Login_errorMessage__1Yqsk"}},151:function(e,t,a){e.exports=a(185)},156:function(e,t,a){},157:function(e,t,a){},185:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(39),r=a.n(i);a(156),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(157);var c,s,l=a(289),u=a(269),d=a(30),m=a(53),f=a(62),p=a.n(f),g=p.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"c0caff3e-2af3-4ee5-bed5-c0d120d6cc75"}}),b=function(){return g.get("todo-lists")},h=function(e){return g.post("todo-lists",{title:e})},E=function(e,t){return g.put("todo-lists/".concat(e),{title:t})},v=function(e){return g.delete("todo-lists/".concat(e))},k=p.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"c0caff3e-2af3-4ee5-bed5-c0d120d6cc75"}}),y=function(){return k.get("auth/me")},j=function(e){return k.post("auth/login",e)},C=function(){return k.delete("/auth/login")},O=function(e,t){e(J({error:t})),e(Z({status:"idle"}))},T=function(e,t){e.messages.length?t(J({error:e.messages[0]})):t(J({error:"Some error occurred"})),t(Z({status:"failed"}))},I=p.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"c0caff3e-2af3-4ee5-bed5-c0d120d6cc75"}}),w=function(e){return I.get("todo-lists/".concat(e,"/tasks"))},x=function(e,t){return I.post("todo-lists/".concat(e,"/tasks"),{title:t})},S=function(e,t,a){return I.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},A=function(e,t){return I.delete("todo-lists/".concat(e,"/tasks/").concat(t))};!function(e){e[e.New=0]="New",e[e.inProgress=1]="inProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(c||(c={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(s||(s={}));var L,F=a(45);!function(e){e[e.success=0]="success",e[e.error=1]="error"}(L||(L={}));var P=Object(F.b)({name:"tasks",initialState:{},reducers:{removeTask:function(e,t){var a=e[t.payload.todolistId],n=a.findIndex((function(e){return e.id===t.payload.taskId}));a.splice(n,1)},addTask:function(e,t){e[t.payload.task.todoListId].unshift(t.payload.task)},updateTask:function(e,t){var a=e[t.payload.todolistId],n=a.findIndex((function(e){return e.id===t.payload.taskId}));a[n]=Object(m.a)(Object(m.a)({},a[n]),t.payload.model)},setTasks:function(e,t){e[t.payload.todolistId]=t.payload.tasks}},extraReducers:function(e){e.addCase(ee,(function(e,t){e[t.payload.todolist.id]=[]})),e.addCase(ie,(function(e,t){delete e[t.payload.todolistId]})),e.addCase(X,(function(e,t){t.payload.todolists.forEach((function(t){return e[t.id]=[]}))})),e.addCase(oe,(function(){return{}}))}}),D=P.reducer,N=P.actions,z=N.removeTask,M=N.addTask,R=N.updateTask,B=N.setTasks,U=function(e,t,a){return function(n,o){n(Z({status:"loading"}));var i=o().tasks[e].find((function(e){return e.id===t}));if(i){var r=Object(m.a)({deadline:i.deadline,description:i.description,priority:i.priority,startDate:i.startDate,title:i.title,status:i.status},a);S(e,t,r).then((function(o){o.data.resultCode===L.success?(n(Z({status:"succeed"})),n(R({taskId:t,model:a,todolistId:e}))):T(o.data,n)})).catch((function(e){O(n,e.message)}))}else console.warn("task not found in the state")}},W=Object(F.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedIn:function(e,t){e.isLoggedIn=t.payload.value}}}),_=W.reducer,q=W.actions.setIsLoggedIn,K=Object(F.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatus:function(e,t){e.status=t.payload.status},setAppError:function(e,t){e.error=t.payload.error},setIsInitialized:function(e,t){e.isInitialized=t.payload.value}}}),Y=K.reducer,H=K.actions,Z=H.setAppStatus,J=H.setAppError,$=H.setIsInitialized,G=Object(F.b)({name:"todolist",initialState:[],reducers:{removeTodolist:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.todolistId}));e.splice(a,1)},addTodolist:function(e,t){var a=Object(m.a)(Object(m.a)({},t.payload.todolist),{},{filter:"All",entityStatus:"idle"});e.unshift(a)},changeTodolistTitle:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].title=t.payload.title},changeTodolistFilter:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].filter=t.payload.filter},setTodolists:function(e,t){return t.payload.todolists.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{filter:"All",entityStatus:"idle"})}))},changeTodolistEntityStatus:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].entityStatus=t.payload.entityStatus},clearTodolistData:function(){return[]}}}),V=G.reducer,Q=G.actions,X=Q.setTodolists,ee=Q.addTodolist,te=Q.changeTodolistEntityStatus,ae=Q.changeTodolistFilter,ne=Q.changeTodolistTitle,oe=Q.clearTodolistData,ie=Q.removeTodolist,re=function(){return function(e){e(Z({status:"loading"})),b().then((function(t){return e(X({todolists:t.data})),e(Z({status:"succeed"})),t.data})).then((function(t){t.forEach((function(t){var a;e((a=t.id,function(e){e(Z({status:"loading"})),w(a).then((function(t){e(B({tasks:t.data.items,todolistId:a}))})).catch((function(t){e(J({error:t.message}))})).finally((function(){e(Z({status:"idle"}))}))}))}))})).catch((function(t){O(e,t.message)}))}},ce=a(283),se=a(292),le=a(9),ue=a(270),de=a(286),me=o.a.memo((function(e){var t=e.callback,a=e.disabled;console.log("AddItemForm working");var i=Object(n.useState)(""),r=Object(le.a)(i,2),c=r[0],s=r[1],l=Object(n.useState)(""),u=Object(le.a)(l,2),d=u[0],m=u[1],f=function(){""!==c.trim()?(t(c),s("")):m("Title is required")};return o.a.createElement("div",null,o.a.createElement(ue.a,{variant:"outlined",error:!!d,value:c,onChange:function(e){s(e.currentTarget.value)},onKeyPress:function(e){""!==d&&m(""),"Enter"===e.key&&f()},label:"Title",helperText:d,size:"small",disabled:a}),o.a.createElement(de.a,{variant:"contained",style:{minWidth:"20px",height:"40px",background:"skyblue",margin:"0 0 5px 5px"},onClick:f,disabled:a},"+"))})),fe=a(261),pe=o.a.memo((function(e){var t=e.value,a=e.callback;console.log("EditableSpan working");var i=Object(n.useState)(!1),r=Object(le.a)(i,2),c=r[0],s=r[1],l=Object(n.useState)(t),u=Object(le.a)(l,2),d=u[0],m=u[1];return c?o.a.createElement(ue.a,{variant:"outlined",value:d,onChange:function(e){m(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!1),a(d)},size:"small"}):o.a.createElement("span",{onDoubleClick:function(){s(!0)}},t)})),ge=a(274),be=a(287),he=o.a.memo((function(e){var t=e.task,a=e.todoId,i=e.changeStatus,r=e.changeTitle,s=e.removeTask,l=Object(n.useCallback)((function(e){i(t.id,e.currentTarget.checked?c.Completed:c.New,a)}),[i,t.id,a]),u=Object(n.useCallback)((function(e,t){r(a,e,t)}),[r,t,a]),d=Object(n.useCallback)((function(e){s(e,a)}),[s,a]);return o.a.createElement("div",{key:t.id,className:t.status===c.Completed?"isDone":""},o.a.createElement(ge.a,{checked:t.status===c.Completed,color:"primary",onChange:l}),o.a.createElement(pe,{value:t.title,callback:function(e){return u(e,t)}}),o.a.createElement(be.a,{"aria-label":"delete",size:"small",onClick:function(){return d(t.id)}},o.a.createElement(fe.a,{fontSize:"small"})))})),Ee=o.a.memo((function(e){var t=e.tasks,a=e.todoId,i=e.title,r=e.filter,s=e.entityStatus,l=e.removeTask,u=e.changeFilter,d=e.addTask,m=e.changeStatus,f=e.removeTodolist,p=e.changeTitle,g=e.changeTitleTodolist,b=Object(n.useCallback)((function(e){d(e,a)}),[d,a]),h=Object(n.useCallback)((function(e){u(a,e)}),[u,a]),E=Object(n.useCallback)((function(){f(a)}),[f,a]),v=Object(n.useCallback)((function(e){g(a,e)}),[g,a]),k=t;return"Active"===r&&(k=t.filter((function(e){return e.status===c.New}))),"Completed"===r&&(k=t.filter((function(e){return e.status===c.Completed}))),o.a.createElement("div",null,o.a.createElement("h3",null,o.a.createElement(pe,{value:i,callback:v}),o.a.createElement(de.a,{variant:"contained",startIcon:o.a.createElement(fe.a,null),onClick:E,disabled:"loading"===s,style:{minWidth:"20px",height:"25px",background:"skyblue",margin:"10px"}},"DELETE")),o.a.createElement(me,{callback:b,disabled:"loading"===s}),o.a.createElement("div",null,k.map((function(e){return o.a.createElement(he,{key:e.id,task:e,todoId:a,changeStatus:m,changeTitle:p,removeTask:l})}))),o.a.createElement("div",null,o.a.createElement(de.a,{variant:"All"===r?"outlined":"text",style:{minWidth:"20px",height:"30px",margin:"5px"},onClick:function(){return h("All")},color:"success"},"All"),o.a.createElement(de.a,{variant:"Active"===r?"outlined":"text",onClick:function(){return h("Active")},color:"primary"},"Active"),o.a.createElement(de.a,{variant:"Completed"===r?"outlined":"text",onClick:function(){return h("Completed")},color:"secondary"},"Completed")))})),ve=a(21),ke=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.todolists})),a=Object(d.c)((function(e){return e.tasks})),i=Object(d.c)((function(e){return e.auth.isLoggedIn}));Object(n.useEffect)((function(){i&&e(re())}),[]);var r=Object(n.useCallback)((function(t,a){e(function(e,t){return function(a){a(Z({status:"loading"})),A(e,t).then((function(n){n.data.resultCode===L.success?(a(Z({status:"succeed"})),a(z({taskId:t,todolistId:e}))):T(n.data,a)})).catch((function(e){O(a,e.message)}))}}(a,t))}),[e]),c=Object(n.useCallback)((function(t,a){var n,o;e((n=a,o=t,function(e){e(Z({status:"loading"})),x(n,o).then((function(t){t.data.resultCode===L.success?(e(Z({status:"succeed"})),e(M({task:t.data.data.item}))):T(t.data,e)})).catch((function(t){O(e,t.message)}))}))}),[e]),s=Object(n.useCallback)((function(t,a,n){e(U(n,t,{status:a}))}),[e]),l=Object(n.useCallback)((function(t,a){e(ae({id:t,filter:a}))}),[e]),u=Object(n.useCallback)((function(t){var a;e((a=t,function(e){e(Z({status:"loading"})),e(te({id:a,entityStatus:"loading"})),v(a).then((function(t){t.data.resultCode===L.success?(e(ie({todolistId:a})),e(Z({status:"succeed"}))):T(t.data,e)})).catch((function(t){O(e,t.message)}))}))}),[e]),m=Object(n.useCallback)((function(t){e(function(e){return function(t){t(Z({status:"loading"})),h(e).then((function(e){e.data.resultCode===L.success?(t(ee({todolist:e.data.data.item})),t(Z({status:"succeed"}))):T(e.data,t)})).catch((function(e){O(t,e.message)}))}}(t))}),[e]),f=Object(n.useCallback)((function(t,a,n){e(U(t,n.id,{title:a}))}),[e]),p=Object(n.useCallback)((function(t,a){var n,o;e((n=t,o=a,function(e){e(Z({status:"loading"})),E(n,o).then((function(t){t.data.resultCode===L.success?(e(Z({status:"succeed"})),e(ne({id:n,title:o}))):T(t.data,e)})).catch((function(t){O(e,t.message)}))}))}),[e]);return i?o.a.createElement(o.a.Fragment,null,o.a.createElement(ce.a,{container:!0,style:{padding:"20px"}},o.a.createElement(me,{callback:m})),o.a.createElement(ce.a,{container:!0,spacing:3},t.map((function(e){var t=a[e.id];return o.a.createElement(ce.a,{item:!0,key:e.id},o.a.createElement(se.a,{style:{padding:"10px"}},o.a.createElement(Ee,{todoId:e.id,title:e.title,tasks:t,removeTask:r,filter:e.filter,entityStatus:e.entityStatus,changeFilter:l,addTask:c,changeStatus:s,removeTodolist:u,changeTitle:f,changeTitleTodolist:p})))})))):o.a.createElement(ve.a,{to:"/login"})},ye=a(288),je=a(290),Ce=a(291),Oe=a(130),Te=a(42),Ie=a(75),we=Object(Te.b)({tasks:D,todolists:V,app:Y,auth:_}),xe=d.c,Se=Object(F.a)({reducer:we,middleware:function(e){return e().prepend(Ie.a)}});window.store=Se;var Ae=a(277),Le=a(272),Fe=o.a.forwardRef((function(e,t){return o.a.createElement(Le.a,Object.assign({elevation:6,ref:t,variant:"filled"},e))})),Pe={horizontal:"center",vertical:"top"};function De(){var e=Object(d.b)(),t=xe((function(e){return e.app.error})),a=function(t,a){"clickaway"!==a&&e(J({error:null}))};return o.a.createElement(Ae.a,{open:!!t,autoHideDuration:6e3,onClose:a,anchorOrigin:Pe},o.a.createElement(Fe,{onClose:a,severity:"error",sx:{width:"100%"}},"Error: ",t))}var Ne=a(284),ze=a(275),Me=a(278),Re=a(279),Be=a(293),Ue=a(267),We=a(271),_e=a(285),qe=a(129),Ke=a(100),Ye=a.n(Ke),He=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isLoggedIn})),a=Object(qe.a)({initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(t){var n;e((n=t,function(e){e(Z({status:"loading"})),j(n).then((function(t){t.data.resultCode===L.success?(e(Z({status:"succeed"})),e(q({value:!0}))):T(t.data,e)})).catch((function(t){O(e,t.message)}))})),a.resetForm()},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<3&&(t.password="Must be more than 3 characters"):t.password="Required",t}});return t?o.a.createElement(ve.a,{to:"/todolist"}):o.a.createElement(Ne.a,{container:!0,justifyContent:"center"},o.a.createElement(Ne.a,{item:!0,justifyContent:"center"},o.a.createElement("form",{onSubmit:a.handleSubmit},o.a.createElement(Me.a,null,o.a.createElement(Ue.a,null,o.a.createElement("p",null,"To log in get registered",o.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"}," here")),o.a.createElement("p",null,"or use common test account credentials:"),o.a.createElement("p",null,"Email: free@samuraijs.com"),o.a.createElement("p",null,"Password: free")),o.a.createElement(Be.a,null,o.a.createElement(We.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"),{onBlur:a.handleBlur})),a.touched.email&&a.errors.email&&o.a.createElement("div",{className:Ye.a.errorMessage},a.errors.email),o.a.createElement(We.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"),{onBlur:a.handleBlur})),a.touched.password&&a.errors.password&&o.a.createElement("div",{className:Ye.a.errorMessage},a.errors.password),o.a.createElement(Re.a,Object.assign({label:"Remember me",control:o.a.createElement(ze.a,null)},a.getFieldProps("rememberMe"))),o.a.createElement(_e.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},Ze=a(294);var Je=function(){var e=Object(d.b)(),t=xe((function(e){return e.app.status})),a=xe((function(e){return e.app.isInitialized})),i=xe((function(e){return e.auth.isLoggedIn}));return Object(n.useEffect)((function(){e((function(e){y().then((function(t){0===t.data.resultCode?e(q({value:!0})):T(t.data,e)})).catch((function(t){O(e,t.message)})).finally((function(){e($({value:!0}))}))}))}),[]),a?o.a.createElement("div",{className:"App"},o.a.createElement(ye.a,{position:"static"},o.a.createElement(l.a,null,o.a.createElement(be.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(u.a,null)),o.a.createElement(je.a,{variant:"h6"},"News"),i&&o.a.createElement(de.a,{color:"inherit",onClick:function(){e((function(e){e(Z({status:"loading"})),C().then((function(t){t.data.resultCode===L.success?(e(Z({status:"succeed"})),e(q({value:!1}))):T(t.data,e)})).catch((function(t){O(e,t.message)})).finally((function(){e(oe())}))}))}},"Logout")),"loading"===t&&o.a.createElement(Oe.a,{color:"primary"})),o.a.createElement(Ce.a,{fixed:!0},o.a.createElement(ve.d,null,o.a.createElement(ve.b,{path:"/todolist",element:o.a.createElement(ke,null)}),o.a.createElement(ve.b,{path:"/login",element:o.a.createElement(He,null)}),o.a.createElement(ve.b,{path:"/404",element:o.a.createElement("h1",{style:{textAlign:"center"}},"404: PAGE NOT FOUND")}),o.a.createElement(ve.b,{path:"*",element:o.a.createElement(ve.a,{to:"/404"})}))),o.a.createElement(De,null)):o.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},o.a.createElement(Ze.a,null))},$e=a(72);r.a.render(o.a.createElement(d.a,{store:Se},o.a.createElement($e.a,null,o.a.createElement(Je,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[151,1,2]]]);
//# sourceMappingURL=main.c51304c4.chunk.js.map